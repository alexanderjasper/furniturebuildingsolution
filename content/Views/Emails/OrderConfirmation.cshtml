@using FurnitureBuildingSolution.Dtos.Order
@using System.Linq
@model OrderDto

<html>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans">
  <head>
    <style>
      body {
        font-family: "Open Sans", sans-serif;
      }
      .a4-page {
        text-align: center;
        padding: 80px;
      }
      .center-logo {
        height: 140px;
        margin-bottom: 40px;
      }
      .section {
        margin-bottom: 20px;
        text-align: left;
      }
      .subtotal {
        text-align: right;
        padding-right: 30px;
      }
      .table {
        width: 100%;
        border-collapse: collapse;
      }
      .table th, .table td {
        text-align: center;
        border: 1px solid #ddd;
        padding: 8px;
      }
    </style>
  </head>
  <body>
    <div class="a4-page">
      <div>
        <img
          src="https://shelfer.dk/resources/images/logo--dark.png"
          class="center-logo"
        />
      </div>
      <h1>Shelfer: Ordrebekr√¶ftelse</h1>
      <h4>Ordrenummer: @(Model.OrderNumber)</h4>
      <div class="section">
        <div><b>Kunde:</b></div>
        <div>@(Model.FirstName) @(Model.LastName)</div>
        @if (Model.CompanyName != null && Model.CompanyName != "") {
            <div>@(Model.CompanyName)</div>
            @if(Model.VatNumber != null && Model.VatNumber != "") {
                <span>-</span>
            }
        }
        @if(Model.VatNumber != null && Model.VatNumber != "") {
        <div>CVR: @Model.VatNumber</div>
        }
        <div>
          @(Model.Address.AddressString)
        </div>
        @if (Model.ShippingAddress != null) {
        <div>
          Forsendelsesadresse: @(Model.ShippingAddress.AddressString)
        </div>
        }
      </div>
      <div>
        <table class="table">
          <tbody>
            <tr>
              <th width="25%">Vare</th>
              <th width="25%">Pris</th>
              <th width="25%">Antal</th>
              <th width="25%">I alt</th>
            </tr>
            @foreach (var orderItem in Model.OrderItems) {
              <tr>
                <td><b>Reol: @(orderItem.Bookcase.Name)</b><br>
                <span style="font-size: 12px">@(orderItem.Bookcase.Material.Name)</span>
                </td>
                <td>@(orderItem.UnitPrice) kr.</td>
                <td>@(orderItem.Quantity)</td>
                <td>@(orderItem.Quantity * orderItem.UnitPrice) kr.</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
      <div class="subtotal">
        <b>Subtotal (@(Model.OrderItems.Sum(orderItem => orderItem.Quantity)) varer):</b>
        @(string.Format("{0:0.00}",Model.OrderItems.Sum(orderItem => orderItem.UnitPrice * orderItem.Quantity)).Replace('.','.')) kr.
        <br />
        <b>Heraf moms:</b>
        @(string.Format("{0:0.00}",Model.OrderItems.Sum(orderItem => orderItem.UnitPrice * orderItem.Quantity*0.2)).Replace('.','.')) kr.
      </div>
    </div>
  </body>
</html>
